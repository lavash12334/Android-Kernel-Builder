name: "üì¶ Quick Repack (No Build)"

on:
  workflow_dispatch:

jobs:
  repack:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: "üõ† Prepare AnyKernel3"
        run: |
          # 1. –ë–µ—Ä–µ–º AnyKernel3
          git clone --depth=1 https://github.com/osm0sis/AnyKernel3.git AnyKernel
          
          # 2. –ë–µ—Ä–µ–º —Ç–≤–æ–π –≥–æ—Ç–æ–≤—ã–π Image.gz –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
          # –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ Image.gz
          cp Image.gz AnyKernel/
          
          # 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–∫—Ä–∏–ø—Ç
          cd AnyKernel
          sed -i 's/device.name1=.*/device.name1=jason/' anykernel.sh
          sed -i 's|BLOCK=.*|BLOCK=/dev/block/bootdevice/by-name/boot;|' anykernel.sh
          
          # 4. –ü–∞–∫—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ
          zip -r9y ../Fast-Kernel-Jason.zip ./*

      - name: "üíõ Download Your ZIP"
        uses: actions/upload-artifact@v4
        with:
          name: Jason-Kernel-Fixed
          path: Fast-Kernel-Jason.zip
